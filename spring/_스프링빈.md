# âœ… ì–´ë–¤ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ë•Œ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡ì„ ì‚¬ìš©í•˜ëŠ”ê°€?
## 1. ì„œë¹„ìŠ¤ ë¡œì§ êµ¬ì„± (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ)
ì˜ˆ: UserService, OrderService ë“±

ëª©ì : íŠ¸ëœì­ì…˜, ì¬ì‚¬ìš©ì„±, í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ë¹ˆìœ¼ë¡œ ë“±ë¡

java
ë³µì‚¬
í¸ì§‘
@Service
public class UserService {
    public void registerUser(User user) { ... }
}
## 2. ì›¹ ìš”ì²­ ì²˜ë¦¬ (Controller ê³„ì¸µ)
ì˜ˆ: REST API ë˜ëŠ” MVC ì»¨íŠ¸ë¡¤ëŸ¬

ëª©ì : í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‘ë‹µì„ ë°˜í™˜í•˜ëŠ” ì›¹ ê³„ì¸µ ê°ì²´ë¥¼ ë¹ˆìœ¼ë¡œ ê´€ë¦¬

java
ë³µì‚¬
í¸ì§‘
@RestController
public class UserController {
    private final UserService userService;
    
    public UserController(UserService userService) {
        this.userService = userService;
    }
}
## 3. ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ (Repository ê³„ì¸µ)
ì˜ˆ: DBì— ì ‘ê·¼í•˜ëŠ” DAO/Repository í´ë˜ìŠ¤

ëª©ì : DB ì—°ê²°, ì¿¼ë¦¬ ìˆ˜í–‰ ë“±ì„ ìœ„í•œ ê°ì²´ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³  íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ë“±ê³¼ í†µí•©

java
ë³µì‚¬
í¸ì§‘
@Repository
public class UserRepository {
    public User findById(Long id) { ... }
}
## 4. AOP ê¸°ëŠ¥ (ì˜ˆ: ë¡œê¹…, íŠ¸ëœì­ì…˜, ë³´ì•ˆ ë“±)
ì˜ˆ: ë¡œê¹…, ì„±ëŠ¥ ì¸¡ì •, ë³´ì•ˆ ì²˜ë¦¬ ë“±ì„ ê³µí†µ ê´€ì‹¬ì‚¬ë¡œ ë¶„ë¦¬

AOP ëŒ€ìƒ í´ë˜ìŠ¤ëŠ” ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì–´ì•¼ AOP í”„ë¡ì‹œê°€ ì ìš©ë¨

java
ë³µì‚¬
í¸ì§‘
@Aspect
@Component
public class LoggingAspect {
    @Before("execution(* com.example..*(..))")
    public void logBefore() { ... }
}
## 5. íŠ¸ëœì­ì…˜ ì²˜ë¦¬
@Transactionalì´ ì ìš©ëœ ì„œë¹„ìŠ¤ë‚˜ ë¦¬í¬ì§€í† ë¦¬ í´ë˜ìŠ¤ëŠ” ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì–´ì•¼ íŠ¸ëœì­ì…˜ í”„ë¡ì‹œê°€ ì‘ë™í•¨

java
ë³µì‚¬
í¸ì§‘
@Service
@Transactional
public class OrderService {
    public void placeOrder(Order order) { ... }
}
## 6. ì„¤ì • í´ë˜ìŠ¤ ë° ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì •
ì˜ˆ: ì»¤ìŠ¤í…€ ì„¤ì •, ì™¸ë¶€ API ì—°ë™ ê°ì²´

@Configuration í´ë˜ìŠ¤ì—ì„œ @Beanì„ ì‚¬ìš©í•´ ëª…ì‹œì ìœ¼ë¡œ ë“±ë¡

java
ë³µì‚¬
í¸ì§‘
@Configuration
public class AppConfig {
    @Bean
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }
}
## 7. ìœ í‹¸ì„± ì»´í¬ë„ŒíŠ¸ (ì˜ˆ: ì´ë©”ì¼ ì „ì†¡, ì•”í˜¸í™”, ìºì‹œ ë“±)
ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìœ í‹¸ í´ë˜ìŠ¤ë“¤ë„ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ ì˜ì¡´ì„± ì£¼ì…ê³¼ AOP ë“±ì„ í™œìš© ê°€ëŠ¥

java
ë³µì‚¬
í¸ì§‘
@Component
public class EmailSender {
    public void send(String to, String subject, String body) { ... }
}
## ìš”ì•½
ê¸°ëŠ¥ êµ¬í˜„ ëª©ì 	ë¹ˆ ë“±ë¡ ì´ìœ 
ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§	íŠ¸ëœì­ì…˜, í…ŒìŠ¤íŠ¸, ì˜ì¡´ì„± ì£¼ì…
ì›¹ ìš”ì²­ ì²˜ë¦¬	ì»¨íŠ¸ë¡¤ëŸ¬ ìë™ ë“±ë¡, ì˜ì¡´ì„± ì£¼ì…
DB ì ‘ê·¼	íŠ¸ëœì­ì…˜ ì²˜ë¦¬, DB ì—°ê²°
AOP ì ìš©	í”„ë¡ì‹œ ê¸°ë°˜ ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥ (ë¡œê¹…, ë³´ì•ˆ, ì„±ëŠ¥ ì¸¡ì • ë“±)
ì„¤ì • ë° ì™¸ë¶€ ì—°ë™	ì„¤ì • ì¼ì›í™”, ê°ì²´ ìƒëª…ì£¼ê¸° ê´€ë¦¬
ìœ í‹¸ì„± ê¸°ëŠ¥	ì¬ì‚¬ìš©ì„±ê³¼ ì£¼ì… í¸ì˜ì„±

ì›í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤ë©´ ì–´ë–¤ ë¹ˆì„ ì–´ë–»ê²Œ ë“±ë¡í• ì§€ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…ë“œë¦´ ìˆ˜ ìˆì–´ìš”. ì˜ˆ: ì´ë©”ì¼ ì „ì†¡ ê¸°ëŠ¥, JWT ì¸ì¦, ìŠ¤ì¼€ì¤„ë§ ë“±.



ë‚˜ì˜ ë§:
ì´ë©”ì¼ ì „ì†¡ ê¸°ëŠ¥

ChatGPTì˜ ë§:
ì´ë©”ì¼ ì „ì†¡ ê¸°ëŠ¥ì„ ìŠ¤í”„ë§ì—ì„œ êµ¬í˜„í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ê³„ë¥¼ ê±°ì¹˜ê³ , ê´€ë ¨ í´ë˜ìŠ¤ë¥¼ ë¹ˆ(Bean)ìœ¼ë¡œ ë“±ë¡í•´ì„œ ì¬ì‚¬ìš©ì„±ê³¼ ì˜ì¡´ì„± ì£¼ì…ì´ ê°€ëŠ¥í•œ êµ¬ì¡°ë¡œ ë§Œë“œëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.

# âœ… ì´ë©”ì¼ ì „ì†¡ ê¸°ëŠ¥ êµ¬ì„± ìš”ì†Œ
êµ¬ì„± ìš”ì†Œ	ì„¤ëª…
JavaMailSender	ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” ì´ë©”ì¼ ì „ì†¡ì„ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤
MailService	ì´ë©”ì¼ ì „ì†¡ ë¡œì§ì„ ë‹´ëŠ” ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ (ë¹ˆìœ¼ë¡œ ë“±ë¡)
ì„¤ì • í´ë˜ìŠ¤	SMTP ì„œë²„ ì •ë³´ ë“± ì´ë©”ì¼ ì „ì†¡ ì„¤ì •

## ğŸ“¦ 1. ì˜ì¡´ì„± ì¶”ê°€ (Spring Boot ê¸°ì¤€ - build.gradle)
groovy
ë³µì‚¬
í¸ì§‘
dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-mail'
}
## âš™ï¸ 2. application.yml ë˜ëŠ” application.properties ì„¤ì •
yaml
ë³µì‚¬
í¸ì§‘
spring:
  mail:
    host: smtp.gmail.com
    port: 587
    username: your_email@gmail.com
    password: your_password
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
â€» êµ¬ê¸€ ê³„ì •ì€ ë³´ì•ˆ ì•± ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤ (2ë‹¨ê³„ ì¸ì¦ í•„ìš”).

## ğŸ§© 3. JavaMailSenderëŠ” ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë¨
Spring Bootì—ì„œëŠ” spring-boot-starter-mailì´ JavaMailSenderë¥¼ ìë™ìœ¼ë¡œ ë¹ˆìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ê·¸ëƒ¥ ì£¼ì…ë°›ìœ¼ë©´ ë©ë‹ˆë‹¤.

## ğŸ› ï¸ 4. MailService í´ë˜ìŠ¤ ë§Œë“¤ê¸° (ì§ì ‘ ë§Œë“  ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ëŠ” @Serviceë¡œ ë¹ˆ ë“±ë¡)
java
ë³µì‚¬
í¸ì§‘
@Service
public class MailService {

    private final JavaMailSender mailSender;

    public MailService(JavaMailSender mailSender) {
        this.mailSender = mailSender;
    }

    public void sendSimpleMessage(String to, String subject, String text) {
        SimpleMailMessage message = new SimpleMailMessage();
        message.setTo(to);
        message.setSubject(subject);
        message.setText(text);
        message.setFrom("your_email@gmail.com"); // ë°œì‹ ì ì„¤ì •
        mailSender.send(message);
    }
}
## ğŸ“¨ 5. ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í˜¸ì¶œ ì˜ˆì‹œ
java
ë³µì‚¬
í¸ì§‘
@RestController
@RequestMapping("/email")
public class EmailController {

    private final MailService mailService;

    public EmailController(MailService mailService) {
        this.mailService = mailService;
    }

    @PostMapping("/send")
    public ResponseEntity<String> sendEmail(@RequestParam String to) {
        mailService.sendSimpleMessage(to, "Hello from Spring", "This is a test email.");
        return ResponseEntity.ok("Email sent successfully");
    }
}
## âœ… ìš”ì•½: ì´ë©”ì¼ ê¸°ëŠ¥ì„ ìœ„í•œ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡ íë¦„
í´ë˜ìŠ¤	ì—­í• 	ë“±ë¡ ë°©ì‹
JavaMailSender	ì´ë©”ì¼ ì „ì†¡ì„ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤	ìë™ ë“±ë¡ (starter)
MailService	ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (ì´ë©”ì¼ ë°œì†¡)	@Service ë¹ˆ ë“±ë¡
EmailController	REST API ì²˜ë¦¬	@RestController ë¹ˆ ë“±ë¡

í•„ìš”í•˜ë‹¤ë©´ ì²¨ë¶€íŒŒì¼ í¬í•¨ ì „ì†¡, HTML ì´ë©”ì¼, í…œí”Œë¦¿ ì‚¬ìš©(Thymeleaf ë“±) ê¸°ëŠ¥ë„ í™•ì¥ ê°€ëŠ¥í•´ìš”. ì›í•˜ì‹œë‚˜ìš”?



ë‚˜ì˜ ë§:
ì²¨ë¶€íŒŒì¼ í¬í•¨ ì „ì†¡, HTML ì´ë©”ì¼

ChatGPTì˜ ë§:
ì¢‹ìŠµë‹ˆë‹¤! ì´ì œ ì´ë©”ì¼ ì „ì†¡ ê¸°ëŠ¥ì„ ì²¨ë¶€íŒŒì¼ í¬í•¨ ë° HTML í˜•ì‹ìœ¼ë¡œ í™•ì¥í•´ ë³´ê² ìŠµë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë ¤ë©´ MimeMessageë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

# âœ… ì²¨ë¶€íŒŒì¼ í¬í•¨ + HTML ì´ë©”ì¼ ì „ì†¡ êµ¬ì¡°
## ğŸ“¦ 1. ì£¼ìš” êµ¬ì„±ìš”ì†Œ ìš”ì•½
êµ¬ì„± ìš”ì†Œ	ì„¤ëª…
MimeMessageHelper	ì²¨ë¶€íŒŒì¼, HTML ë“± ë³µì¡í•œ ì´ë©”ì¼ ì„¤ì • ì§€ì›
MailService	HTML ë° ì²¨ë¶€íŒŒì¼ ì „ì†¡ ê¸°ëŠ¥ ì¶”ê°€
JavaMailSender	ì´ë©”ì¼ ì „ì†¡ìš© ë¹ˆ (ìë™ ë“±ë¡ë¨)

## ğŸ› ï¸ 2. HTML ë° ì²¨ë¶€íŒŒì¼ ì „ì†¡ ì½”ë“œ
java
ë³µì‚¬
í¸ì§‘
@Service
public class MailService {

    private final JavaMailSender mailSender;

    public MailService(JavaMailSender mailSender) {
        this.mailSender = mailSender;
    }

    public void sendHtmlMessageWithAttachment(String to, String subject, String htmlContent, File attachment) {
        try {
            MimeMessage message = mailSender.createMimeMessage();

            // true -> multipart ë©”ì¼ì„ ë³´ë‚¸ë‹¤ëŠ” ì˜ë¯¸
            MimeMessageHelper helper = new MimeMessageHelper(message, true, "UTF-8");
            helper.setTo(to);
            helper.setSubject(subject);
            helper.setText(htmlContent, true); // true: HTML ì‚¬ìš©
            helper.setFrom("your_email@gmail.com");

            // ì²¨ë¶€íŒŒì¼ ì¶”ê°€
            if (attachment != null) {
                FileSystemResource file = new FileSystemResource(attachment);
                helper.addAttachment(file.getFilename(), file);
            }

            mailSender.send(message);
        } catch (MessagingException e) {
            throw new RuntimeException("ì´ë©”ì¼ ì „ì†¡ ì‹¤íŒ¨", e);
        }
    }
}
## ğŸŒ 3. ì˜ˆì‹œ HTML ì½˜í…ì¸ 
java
ë³µì‚¬
í¸ì§‘
String html = """
    <html>
        <body>
            <h1 style="color:blue;">Welcome!</h1>
            <p>This is an <b>HTML email</b> with an attachment.</p>
        </body>
    </html>
""";
## ğŸ“¤ 4. ì»¨íŠ¸ë¡¤ëŸ¬ ì˜ˆì‹œ (Multipart ìš”ì²­ ì²˜ë¦¬)
java
ë³µì‚¬
í¸ì§‘
@RestController
@RequestMapping("/email")
public class EmailController {

    private final MailService mailService;

    public EmailController(MailService mailService) {
        this.mailService = mailService;
    }

    @PostMapping("/send-html")
    public ResponseEntity<String> sendHtmlEmail(
        @RequestParam String to,
        @RequestParam String subject,
        @RequestParam String htmlContent,
        @RequestParam(required = false) MultipartFile file
    ) throws IOException {

        File tempFile = null;

        if (file != null && !file.isEmpty()) {
            // MultipartFile â†’ File (ì„ì‹œ íŒŒì¼ ìƒì„±)
            tempFile = File.createTempFile("upload-", file.getOriginalFilename());
            file.transferTo(tempFile);
        }

        mailService.sendHtmlMessageWithAttachment(to, subject, htmlContent, tempFile);
        return ResponseEntity.ok("HTML ì´ë©”ì¼ ì „ì†¡ ì™„ë£Œ");
    }
}
## âœ… ì •ë¦¬: ì´ êµ¬ì¡°ì—ì„œ ë¹ˆ ë“±ë¡ì˜ ì—­í• 
ì»´í¬ë„ŒíŠ¸	ì„¤ëª…	ë“±ë¡ ë°©ì‹
JavaMailSender	ì´ë©”ì¼ ì „ì†¡ ì—”ì§„	ìë™ ë“±ë¡
MailService	HTML ë° ì²¨ë¶€íŒŒì¼ í¬í•¨ ì´ë©”ì¼ ì „ì†¡ ë¡œì§	@Service ë“±ë¡
EmailController	API ì—”ë“œí¬ì¸íŠ¸	@RestController ë“±ë¡

ğŸš€ í™•ì¥ ì•„ì´ë””ì–´
ğŸ“ ì—¬ëŸ¬ ê°œì˜ ì²¨ë¶€íŒŒì¼ ì§€ì›

ğŸ’Œ HTML í…œí”Œë¦¿ ì ìš© (Thymeleaf, Freemarker ë“±)

ğŸ“… ì˜ˆì•½ ë©”ì¼ (ìŠ¤ì¼€ì¤„ë§ + Quartz)

âœ… ë©”ì¼ ì „ì†¡ ì„±ê³µ/ì‹¤íŒ¨ ë¡œê·¸ ì €ì¥

í•„ìš”í•˜ì‹œë©´ HTML í…œí”Œë¦¿ + Thymeleaf ì—°ë™ ì˜ˆì œë„ ì œê³µí•´ë“œë¦´ê²Œìš”. ì›í•˜ì‹œë‚˜ìš”?
