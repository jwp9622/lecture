# ORM, 로깅, RESTAPI
## CRUD, SQL    
  DB,데이터,JPA    
      
  O-R Mapping(Object relation Mapping)    
    
  클래스 : 테이블 = 1:1    
  객체   : 행    = 1:1    
  멤버필드 : 컬럼 = 1:1    
    
## 델리게이션 모델(Delegation Model)    
Event    
Source --> Listener --> Handler    
(버튼)     (감지)        이벤트처리    

## JPA 로깅 설정 - ORM 기술과 연결
로깅(logging) - 시스템, 작동, 상태, 정보 기록

## restapi
REST API(Representational State Transfer API)   
서버 자원, 클라이언트, 크로스브라우징에 설계 방식      
서버는 화면(view) 대신 데이터(data) 응답 --> json(javascript)   
JSon(Javascript Object Notation) - 요즘 많이 사용함.   
XML(Extentional Markup Language) - 과가에 많이 사용됨.   
REST API = 솔루션 모델 + 9단계 + JSON 응답   
http요청 -> json으로 응답   
   
Class : XML : JSON : Table   
   
JSON 구조   
{   
    "id":1,   
    "title":"가가가가",   
    "content":"1111"   
}   
   

## API(application Programming Interface)    
하나의 약속, 약속된 응답 받을수 있음.   
api 호출시 원하는 결과 바로 받을수 있음.   
예) 카카오뱅크, 은행 api 제공(입금, 입출, 잔액조회)   
   
## json 테스트 사이트   
https://jsonplaceholder.typicode.com/   


## 문제
1. JPA 로그 설정   
application.properties 파일에서 설정.   
로그 레벨: DEBUG 설정 시 SQL 로그 확인 가능.   
SQL 줄바꿈 적용: format_sql=true   
DB로 넘기는 값 확인: BasicBinder TRACE 설정   

# JPA 로그 설정   
logging.level.org.hibernate.SQL=DEBUG   
spring.jpa.properties.hibernate.format_sql=true   
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE   
2. 기본키와 ID 자동 생성 전략   
   
기본키(primary key): 테이블의 유일성 확보를 위한 식별자.   
@GeneratedValue(strategy = GenerationType.IDENTITY) 사용 시 DB가 id 자동 생성.   
   
@GeneratedValue(strategy = GenerationType.IDENTITY)   

3. CRUD와 SQL 쿼리      

CRUD: 생성(Create), 조회(Read), 수정(Update), 삭제(Delete)   
JPA는 요청을 받아 DB에 SQL로 변환 전달함.   
   
INSERT → 데이터 생성   
SELECT → 데이터 조회   
UPDATE → 데이터 수정   
DELETE → 데이터 삭제   

4. CREATE TABLE 문   
   
CREATE TABLE 테이블명 (   
  속성명1 자료형,   
  속성명2 자료형,   
  속성명3 자료형,   
  PRIMARY KEY (기본키)   
);   

5. INSERT 문   
   
INSERT   
INTO 테이블명   
(속성명1, 속성명2, 속성명3, ...)   
VALUES   
(값1, 값2, 값3, ...);   

6. SELECT 문   
   
SELECT   
  속성명1, 속성명2, 속성명3   
FROM   
  테이블명   
WHERE   
  조건;   
   
   
※ WHERE 절이 없으면 전체 데이터 조회  

7. UPDATE 문   
      
UPDATE   
  테이블명   
SET   
  속성명 = 변경할 값   
WHERE      
  조건;
   
   
※ WHERE 절이 없으면 모든 데이터 수정   

8. DELETE 문   
   
DELETE   
[FROM] 테이블명   
WHERE 조건;   


※ WHERE 절이 없으면 모든 데이터를 삭제 (테이블만 남음)   
   
홍창윤 5:37 PM   
정리하시고, 셀프테스트 풀어봅니다.   

## 셀프 테스트
   
CREATE TABLE burgers (   
  id BIGINT GENERATED BY DEFAULT AS IDENTITY,   
  name VARCHAR(50),     -- 이름(최대 50글자)   
  price INTEGER,        -- 가격(숫자)   
  gram INTEGER,         -- 무게(숫자)   
  kcal INTEGER,         -- 열량(숫자)   
  protein INTEGER,      -- 단백질량(숫자)   
  PRIMARY KEY (id)   
);   
   
## 다음과 같은 결과를 만드는 쿼리를 작성하시오.   
| ID | NAME           | PRICE | GRAM | KCAL | PROTEIN |   
------------------------------------------------------------   
| 1  | 햄언버거 골드 | 5300  | 222     | 540    | 25      |   
| 2  | 더블 치즈버거 | 6300  | 219     | 619    | 36      |   
| 3  | 빅맥              | 5300  | 223     | 583    | 27      |   
   