# 📘 JPA 로깅 설정
회독(이론) + 정주행(행동) --> 고품질 IT   
솔루션 모델  
  
## CRUD + SQL  
데이터베이스 + ORM  
  
## JPA 로깅 설정  
장애 발생시 추적정보인 로그정보를 확인하는 행위를 로깅이라고 하는데 이러한 설정을 하는것을 로깅설정이라고 한다.  
  
쿼리가 중요 --> CRUD(Insert, Select, Update, Delete, Create)  
로깅 --> 상태 --> 상태 + 작동 --> 기록   
jpa는 추상화 레벨이 높음. 그래서 쿼리 실행시 어느단계에서 에러발생여부를 알수가 없어서 로깅이라는 기능을 이용한다. 로깅 설정 정보를 별도로 해야한다.  
레벨을 낮춰서 추석할수 있어야 한다.  
  
* **application.properties 설정**  
  **logging.level.org.hibernate.SQL=DEBUG** 
    | 레벨명   | 레벨 번호 | 설명                          |
    | ----- | ----- | --------------------------- |
    | **TRACE** | 1     | DEBUG 레벨보다 더 상세한 정보         |
    | **DEBUG** | 2     | 응용 프로그램을 디버깅하는 데 필요한 세부 정보  |
    | **INFO**  | 3     | 응용 프로그램의 순조로운 진행 정보         |
    | **WARN**  | 4     | 잠재적으로 유해한 상황 정보             |
    | **ERROR** | 5     | 응용 프로그램이 수행할 수 있는 정도의 오류 정보 |
    | **FATAL** | 6     | 응용 프로그램이 중단될 만한 심각한 오류 정보   |
    | **OFF**   | 7     | 로깅 기능 해제                    |


    log4j 로깅해주는 라이브러리, 모든 프레임워크에서 적용되는 라이브러리     
    (로그예)  
    org.hibernate.SQL = drop table if exists article CASCADE  
      
  **spring.jpa.properties.hibernate.format_sql=true**  
    hibernate 실행하는 SQL문을 예쁘게 출력해서 보내준다.  
  
  **logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE**  
    매개변수값을 보여준다.  

## 기존 방식(JDBC) vs JPA
* **JDBC** : SQL 직접 작성, 반복되는 코드 많음(try-catch-finally, Connection, statement, 쿼리실행ResultSet)
* **JPA** : SQL 자동 생성, 생산성 향상, 매핑 자동화
jdbc -> SpringJdbc -> JPA

## JPA 구성요소
**@Entity**(클래스를 테이블로 사용한다.) 
**@Id @GeneratedValue**(기본키 자동 생성 애노테이션)
**@Column(nullable=true, unique=true)**(속성지정가능, 필드가 컬럼매핑 설정도와줌)
EntityManager(생략가능)

* MemberRepository.java
import org.springframework.data.jpa.repository.JpaRepository;
public interface Memb;erRepository extends JpaRepository<Member, Long>{
    List<Member> findByName(String name);

}
- JpaRepository<엔티티, ID 타입>
- 기본 CRUD 메서드 제공 : findAll(), save(), delete()
- 메서드 이름 기반 쿼리 자동 생성

## 실습 과제
1. Member Entity  만들기
2. MemberRepository 생성
3. Get /members API 구현
3. POST /members로 멤버 등록 구현
5. H2 콘솔에서 테이블 확인하기

# ✅ 문제

## 테이블의 생성 문제
다음은 burgers 테이블의 생성 SQL입니다.
CREATE TABLE burgers (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY,
  name VARCHAR(50),     -- 이름(최대 50글자)
  price INTEGER,        -- 가격(숫자)
  gram INTEGER,         -- 무게(숫자)
  kcal INTEGER,         -- 열량(숫자)
  protein INTEGER,      -- 단백질량(숫자)
  PRIMARY KEY (id)
);
burgers 테이블에 다음과 같은 데이터가 저장되도록 INSERT 구문을 작성하고, 해당 데이터를 조회하는 SELECT 쿼리도 작성하세요.

1. INSERT INTO 문을 통해 각 데이터를 삽입합니다. id는 자동 생성되므로 생략합니다.
    -- 데이터 삽입
    INSERT INTO burgers (name, price, gram, kcal, protein) VALUES
    ('행운버거 골드', 5300, 222, 540, 25),
    ('트리플 치즈버거', 6300, 219, 619, 36),
    ('빅맥', 5300, 223, 583, 27);

2. SELECT * FROM burgers; 로 전체 데이터를 조회합니다.
    -- 데이터 조회
    SELECT * FROM burgers;


## 단답형 문제
1. JPA에서 SQL 로그를 보기 위해 설정하는 로그 레벨은? DEBUG
2. SQL 로그를 예쁘게 출력하기 위한 설정 키는?  format\_sql
3. DB에 전달되는 바인딩 값을 보기 위한 TRACE 설정 대상은? BasicBinder
4. 기본 키 생성을 위한 JPA 애노테이션은? @Id @GeneratedValue
5. JPA에서 기본 키 전략으로 DB가 직접 생성하는 전략은?  IDENTITY
6. 데이터를 생성하는 SQL 명령은? insert 
7. 데이터를 조회하는 SQL 명령은? select
8. 데이터를 수정하는 SQL 명령은? update
9. 데이터를 삭제하는 SQL 명령은? delete 
10. CREATE TABLE에서 기본키를 설정하는 키워드는? primary key
11. INSERT 문에서 사용하는 키워드는? values
12. SELECT 문에서 조건절을 추가할 때 사용하는 키워드는? where 
13. UPDATE 문에서 값을 변경할 때 사용하는 키워드는? set 
14. DELETE 문에서 테이블을 지정하는 키워드는? from 
15. JPA는 어떤 언어로 SQL을 대신하는가? Java 
16. SQL은 무엇의 약자인가? Structured Query Language
17. JPA에서 테이블과 매핑되는 클래스는 무엇이라 부르는가? 엔티티
18. @GeneratedValue에 함께 사용하는 전략 지시어는? strategy
19. SQL에서 테이블을 생성하는 명령은? Create table
20. 테이블에서 중복을 방지하는 키는? PRIMARY KEY

## 단답형 정답
1. DEBUG
2. format\_sql
3. BasicBinder
4. @GeneratedValue
5. IDENTITY
6. INSERT
7. SELECT
8. UPDATE
9. DELETE
10. PRIMARY KEY
11. VALUES
12. WHERE
13. SET
14. FROM
15. Java
16. Structured Query Language
17. 엔티티
18. strategy
19. CREATE TABLE
20. PRIMARY KEY

# 객관식 문제 (10문제)
21. JPA에서 SQL 로그를 출력하려면 어떤 레벨로 설정해야 하는가? 3
    ① TRACE ② INFO ③ DEBUG ④ ERROR

22. SQL 쿼리를 보기 좋게 정렬해서 출력하려면 어떤 설정을 사용하는가? 3
    ① show\_sql ② sql\_format ③ format\_sql ④ pretty\_sql

23. JPA의 기본 키 자동 생성 전략 중 DB가 자동으로 키를 생성하는 방식은? 4
    ① AUTO ② SEQUENCE ③ TABLE ④ IDENTITY

24. 다음 중 데이터 조회에 사용하는 SQL 명령은? 1
    ① SELECT ② INSERT ③ DELETE ④ UPDATE

25. 데이터를 삭제할 때 사용하는 SQL 명령어는? 3
    ① REMOVE ② DROP ③ DELETE ④ ERASE

26. INSERT 문에서 데이터를 나열하는 데 사용하는 키워드는?2
    ① SET ② VALUES ③ INPUT ④ INTO

27. SELECT 문에서 조건을 지정할 때 사용하는 키워드는? 4
    ① IF ② CONDITION ③ FILTER ④ WHERE

28. UPDATE 문에서 수정할 값을 지정하는 키워드는? 3
    ① VALUES ② CHANGE ③ SET ④ ASSIGN

29. DELETE 문에서 삭제할 대상을 지정하는 키워드는?2
    ① DROP ② FROM ③ OF ④ IN

30. JPA에서 @GeneratedValue에 설정하는 전략 중 하나가 아닌 것은? 2
    ① AUTO ② MANUAL ③ IDENTITY ④ SEQUENCE

## 객관식 정답 및 해설
21. ③ (DEBUG) — SQL 로그 출력에는 DEBUG 레벨 사용
22. ③ (format\_sql) — 쿼리 줄바꿈용 설정
23. ④ (IDENTITY) — DB가 직접 ID 생성
24. ① (SELECT) — 조회
25. ③ (DELETE) — 데이터 삭제
26. ② (VALUES) — INSERT 값 나열 시 사용
27. ④ (WHERE) — 조건절
28. ③ (SET) — UPDATE 시 값 변경
29. ② (FROM) — DELETE에서 테이블 지정
30. ② (MANUAL) — 존재하지 않는 전략명
