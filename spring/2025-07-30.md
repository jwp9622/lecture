#
## RESTful API 설계 원칙 & Talend 실습
--> "표현력 있게" = "이 API가 어떤 자원에 어떤 동작을 하는지" = RESTful 설계  
  
/posts --> 자원  
GET, POST, PUT, DELETE --> 조회, 등록, 수정, 삭제  

## 강의 내용
1. REST 원칙 요약
  - 자원 중심 URI 설계
  - HTTP Method : GET, POST, PUT, DELETE
  - 상태 코드 : 200, 302, 204, 400, 404 등 정리 
2. 게시판 리소스 URI 설계
  - /posts --> 컬렉션
  - /posts/{id} -->  단건 리소스
3. API 상태 코드 설계 전략
  - POST 성공시 --> 201 Created
  - PUT/DELETE 성공시 -> 204 No Content
  - 잘못된 요청 --> 400 Bad Request
  - 없는 리소스 --> 404 Not Found
4. Swagger 문서 작성 구조 소개(Springdoc)
5. Talend API Tester를 통한 실습 중심 테스트

## 실습 코드 : 게시글 등록용 API 설계

* 구조
com.example.board  
  |-BoardApplication.java  
  |-controller  
    |-PostController.java  
  |-dto  
    |-PostRequestDTO  
  |-service  
    |-PostService.java  

* PostRequestDTO.java
        package com.example.board.dto;
        
        public class PostRequestDtO {
        private String title;
        private String content;

        public String getTitle() {return title;}
        public void setTitle(String title) {this.title = title;}
        public String getContent() { return content;}
        public void setContent(String content) {this.content = content;}
        }



* PostService.java

        package com.example.board.service;

        import com.example.board.dto.PostRequestDTO;
        import org.springframework.stereotype.Service;

        @Service
        public class PostService {
        public void createPost(PostRequestDTO dto) {
            System.out.println("제목: " + dto.getTitle());
            System.out.println("내용: " + dto.getContent());
        }
        }


* PostController.java

        package com.example.board.controller;

        import com.example.board.dto.PostRequestDTO;
        import com.example.board.service.PostService;
        import org.springframework.http.ResponseEntity;
        import org.springframework.web.bind.annotation.*;

        @RestController
        @RequestMapping("/posts")
        public class PostController {
        private final PostService postService;

        public PostController(PostService postService) {
            this.postService = postService;
        }

        public ResponseEntity<String> create(@RequestBody PostRequestDTO dto) {
            postService.createPost(dto);
            return ResponseEntity.status(201).body("게시글이 등록되었습니다.");
        }
        }

## Day 2 과제
1. /posts API를 위와 같이 작성하고 직접 실행해 보세요.
2. Swagger UI에 명세를 설정하고 확인해보세요.
3. Talend를 통해 다음 요청을 테스트하세요.
    정상입력 : {"title":"첫 글", "content":"내용입니다."}
    오류입력 : {"content" : "내용만 있음"}
4. 각 요청에 따른 상태 코드와 메시지를 비교 분석하여 문서를 정리해보세요.

## Day 2 과제 풀이 - 실습 코드 및 테스트

  /posts API 작성 및 실행  
  게시글 등록용 POST API를 구현합니다.  
  유효성 검증은 다음 Day에 추가하므로 현재는 기본 구조만 구성합니다.  


  * 패키지 구조  
    com.example.board  
    ├── BoardApplication.java  
    ├── controller  
    │   └── PostController.java  
    ├── dto  
    │   └── PostRequestDto.java  
    ├── service  
    │   └── PostService.java  



            package com.example.board.dto;
            public class PostRequestDto {
                private String title;
                private String content;
                public String getTitle() { return title; }
                public void setTitle(String title) { this.title = title; }
                public String getContent() { return content; }
                public void setContent(String content) { this.content = content; }
            }


            package com.example.board.service;
            import com.example.board.dto.PostRequestDto;
            import org.springframework.stereotype.Service;
            @Service
            public class PostService {
                public void createPost(PostRequestDto dto) {
                    System.out.println("등록된 제목: " + dto.getTitle());
                    System.out.println("등록된 내용: " + dto.getContent());
                }
            }


    package com.example.board.controller;
    import com.example.board.dto.PostRequestDto;
    import com.example.board.service.PostService;
    import org.springframework.http.ResponseEntity;
    import org.springframework.web.bind.annotation.*;
    @RestController
    @RequestMapping("/posts")
    public class PostController {
        private final PostService postService;
        public PostController(PostService postService) {
            this.postService = postService;
        }
        @PostMapping
        public ResponseEntity<String> createPost(@RequestBody PostRequestDto dto) {
            postService.createPost(dto);
            return ResponseEntity.status(201).body("게시글 등록 완료");
        }
    }

* Talend API Tester로 요청 테스트

정상 입력

      POST http://localhost:8080/posts
      Content-Type: application/json

      {
        "title": "첫 글",
        "content": "내용입니다"
      }

 예상 응답
    	
      Status: 201 Created
      Body: "게시글 등록 완료"

        오류 입력(title 없음)

          POST http://localhost:8080/posts
      Content-Type: application/json
      
      {
        "content": "내용만 있음"
      }

	--> 현재는 유효성 검증이 없으므로 정상 처리됩니다.
	--> Day 3에서 ``추가 시 400 오류로 변경됨


## Day 1 실습형 과제 10문제

문제 1.  
 /hello 요청 시 응답으로 "Hello, Web Developer!"라는 메시지를 반환하도록 API를 작성하고 실행하세요.  
 조건: Controller → Service 구조를 반드시 적용할 것  

문제 2.v
 Talend API Tester를 이용해 다음 요청을 보내고 응답을 확인하세요.  

Method: GET  
URL: http://localhost:8080/hello  

문제 3.  
 /greet URI를 새로 추가하고, 응답 메시지를 "Good day to you!"로 설정하세요.  

문제 4.  
 HelloService의 /hello 응답에 현재 시각(LocalDateTime)을 포함해보세요.  
 예시 응답: "Hello, Web Developer! 현재 시간: 2025-07-30T15:01:23"  

문제 5.  
 HelloRepository 클래스를 생성하고, "Hello from Repository!" 메시지를 반환하는 메서드를 만들어 HelloService에서 호출해보세요.  

문제 6.  
 클래스 간 의존성 관계(Controller → Service → Repository)를 다이어그램 또는 텍스트로 그려보세요.  
 예시: Client → HelloController → HelloService → HelloRepository  

문제 7.  
 @RestController, @Service, @Repository 각각의 역할을 주석으로 코드에 설명해보세요.  

문제 8.v
 /hello, /greet 요청 시 Content-Type: application/json 헤더가 포함되어 있는지 Talend에서 확인해보세요.  

문제 9.  
 Service 클래스 내부에서 메서드를 분리하여 재사용 가능한 형태로 리팩토링해보세요.  
 예: getCurrentTime(), getBasicGreeting() 등  

문제 10.  
 추가 URI /welcome을 만들어 "Welcome to the REST API world!" 메시지를 반환하도록 구성하고 Talend로 테스트하세요.  


## Day 1 실습형 과제 풀이

문제 1
/hello 요청 시 "Hello, Web Developer!" 메시지를 반환하는 API를 구현하세요.
풀이
    📁 HelloController.java

    @RestController
    public class HelloController {
        private final HelloService helloService;

        public HelloController(HelloService helloService) {
            this.helloService = helloService;
        }

        @GetMapping("/hello")
        public String hello() {
            return helloService.getHelloMessage();
        }
    }

📁 HelloService.java

    @Service
    public class HelloService {
        public String getHelloMessage() {
            return "Hello, Web Developer!";
        }
    }


문제 2
Talend API Tester로 /hello 요청을 보내고 응답을 확인하세요.
풀이
    Method: GET

    URL: http://localhost:8080/hello
    Response: "Hello, Web Developer!"
    Header: Content-Type: application/json

문제 3
/greet URI를 추가하고 "Good day to you!" 메시지를 반환하세요.
풀이
📁 HelloController.java

    @GetMapping("/greet")
    public String greet() {
        return helloService.getGreetingMessage();
    }

📁 HelloService.java
    public String getGreetingMessage() {
        return "Good day to you!";
    }


문제 4
/hello 응답 메시지에 현재 시간을 포함하세요.
풀이
📁 HelloService.java

    import java.time.LocalDateTime;

    public String getHelloMessage() {
        return "Hello, Web Developer! 현재 시간: " + LocalDateTime.now();
    }


문제 5
HelloRepository에서 메시지를 반환하고, Service에서 이를 호출하세요.
풀이
📁 HelloRepository.java

    @Repository
    public class HelloRepository {
        public String fetchGreeting() {
            return "Hello from Repository!";
        }
    }

📁 HelloService.java
    private final HelloRepository helloRepository;

    public HelloService(HelloRepository helloRepository) {
        this.helloRepository = helloRepository;
    }

    public String getHelloMessage() {
        return helloRepository.fetchGreeting();
    }

문제 6
클래스 간 의존성 관계를 그림 또는 텍스트로 표현하세요.
풀이
    [Client 브라우저 또는 Talend]
          ↓
    [HelloController]  →  @RestController
          ↓
    [HelloService]     →  @Service
          ↓
    [HelloRepository]  →  @Repository


문제 7
각 어노테이션 역할을 주석으로 작성하세요.
풀이 (코드 주석 예시)
📁 HelloController.java

    // @RestController: REST API의 컨트롤러 역할. JSON 또는 문자열 반환
    @RestController
    public class HelloController { ... }

📁 HelloService.java

    // @Service: 비즈니스 로직을 처리하는 서비스 계층
    @Service
    public class HelloService { ... }

📁 HelloRepository.java

    // @Repository: 데이터 접근을 담당하는 계층
    @Repository
    public class HelloRepository { ... }


문제 8
Talend 요청 헤더에 Content-Type이 application/json인지 확인하세요.
풀이
    Talend Request Header 설정


    Key: Accept
    Value: application/json

응답이 JSON 문자열로 정상 반환됨 확인
문제 9
HelloService에 공통 메서드를 분리하여 재사용하세요.
풀이

📁 HelloService.java
    public String getHelloMessage() {
        return getGreetingPrefix() + LocalDateTime.now();
    }

    private String getGreetingPrefix() {
        return "Hello, Web Developer! 현재 시간: ";
    }


문제 10
/welcome URI를 만들고 "Welcome to the REST API world!" 메시지를 반환하세요.
풀이

    📁 HelloController.java
        @GetMapping("/welcome")
        public String welcome() {
            return "Welcome to the REST API world!";
        }


## Day 2 작업형 실습문제 10문제

문제 1
/posts 경로에 대한 POST API를 직접 구현하고, JSON 요청 본문을 통해 제목과 내용을 입력받도록 하세요.

POST API 구현
 PostController.java
 
    @PostMapping
    public ResponseEntity<String> create(@RequestBody PostRequestDto dto) {
        postService.createPost(dto);
        return ResponseEntity.status(201).body("게시글이 등록되었습니다.");
    }


문제 2
PostRequestDto 클래스를 생성하여 클라이언트로부터 전달받을 데이터(title, content)를 정의하고, getter/setter를 작성하세요.

    PostRequestDto.java
    package com.example.board.dto;

    public class PostRequestDto {
        private String title;
        private String content;

        public String getTitle() { return title; }
        public void setTitle(String title) { this.title = title; }

        public String getContent() { return content; }
        public void setContent(String content) { this.content = content; }
    }


문제 3
PostService 클래스에 createPost() 메서드를 정의하고, 전달받은 DTO의 내용을 System.out.println()으로 출력해보세요.

    PostService.java
    @Service
    public class PostService {
        public void createPost(PostRequestDto dto) {
            System.out.println("제목: " + dto.getTitle());
            System.out.println("내용: " + dto.getContent());
        }
    }


문제 4
PostController 클래스에서 /posts 경로의 POST 요청을 처리하는 메서드를 만들고, 요청 바디에 담긴 JSON을 @RequestBody로 받도록 구성하세요.

    PostController.java
    @RestController
    @RequestMapping("/posts")
    public class PostController {
        private final PostService postService;

        public PostController(PostService postService) {
            this.postService = postService;
        }

        @PostMapping
        public ResponseEntity<String> create(@RequestBody PostRequestDto dto) {
            postService.createPost(dto);
            return ResponseEntity.status(201).body("게시글 등록 완료");
        }
    }


문제 5
ResponseEntity<String>을 반환하도록 컨트롤러 메서드를 수정하고, 게시글 등록 성공 시 HTTP 상태 코드 201(Created)과 함께 메시지를 반환해보세요.

    HTTP 201 상태 코드 반환
    return ResponseEntity.status(HttpStatus.CREATED).body("게시글 등록 완료");


문제 6
springdoc-openapi 의존성을 프로젝트에 추가하고, Swagger UI를 실행 가능한 상태로 설정하세요. 실행 주소는 무엇인가요?

    Swagger UI 설정
    build.gradle 추가:

    implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.0.2'

    Swagger UI 접속:

    http://localhost:8080/swagger-ui/index.html


문제 7
Swagger UI를 통해 /posts API의 요청과 응답 형식을 확인하세요. 요청 필드는 무엇이며, 응답 코드와 메시지는 어떻게 나옵니까?


    Swagger 명세 확인
    POST /posts

    요청 필드: title (String), content (String)
    응답 코드: 201 Created
    응답 메시지: 게시글 등록 완료


문제 8
Talend API Tester를 사용하여 다음 JSON으로 POST 요청을 보내고, 상태 코드와 응답 메시지를 확인하세요.
{
  "title": "두 번째 글",
  "content": "Talend로 보낸 요청입니다."
}

Talend 정상 요청 테스트
    요청:

    {
      "title": "두 번째 글",
      "content": "Talend로 보낸 요청입니다."
    }


응답:  


        Status: 201 Created  
        Body: 게시글 등록 완료  
        

서버 로그:  

    제목: 두 번째 글    
    내용: Talend로 보낸 요청입니다.  



문제 9
다음과 같은 잘못된 JSON 요청을 Talend로 보냈을 때, 응답 결과와 상태 코드를 확인하세요. 이 결과를 분석해보세요.  
{
  "content": "제목이 없습니다."  
}  



잘못된 요청: title 없음

        {  
        "content": "제목이 없습니다."  
        }
  
        현재 유효성 검증이 없기 때문에 정상 등록됨


응답:

        Status: 201 Created  
        Body: 게시글 등록 완료  
        Day 3 유효성 검증 추가 시, 400 Bad Request로 바뀜  




문제 10
다음 JSON을 요청 본문에 넣고 보냈을 때 발생할 수 있는 오류 원인을 설명하고, 어떻게 수정해야 할지 기술하세요.
{
}

    빈 JSON 요청
    {}

    응답:
    Status: 400 Bad Request


    이유:
    PostRequestDto의 title과 content가 모두 null로 매핑됨
    DTO 필드가 null일 경우, @NotNull 등의 유효성 검증이 없으면 에러 없이 처리됨
    단, 이후 로직에서 NPE나 비정상 동작 가능

    수정 방법:
    클라이언트가 반드시 title, content 포함하도록 수정
    또는 서버에서 유효성 검증 추가 예정




### 웹 개발 심화 과정 교안 개요 (Java + Spring Boot 기반, 실습 중심)

> Day 주제/ 강의 개요/ 강의 내용

1일차
웹 구조와 아키텍처 리뷰
MVC, REST 구조 심화 이해
웹 아키텍처, Layered 구조, 컨트롤러 흐름 분석

2일차
실전 RESTful API 설계
REST 원칙과 URL 설계 전략
리소스 URI, 상태 코드 설계, Swagger 도입

3일차
실습: 게시판 API 만들기
Spring Boot로 CRUD API 설계
Entity, Repository, Controller, Service 분리 구현

4일차
실습: 예외 처리 & 글로벌 핸들러
ControllerAdvice, Error 응답 포맷
커스텀 예외, Valid 처리, 에러 메시지 통일

5일차
인증/인가 - JWT 기반 로그인
Spring Security + JWT 흐름
JWT 토큰 발급, 필터 구성, 인증 체크

6일차
실습: 로그인 및 회원 관리 API
회원가입, 로그인, 내 정보 조회
Token 발급/검증, 사용자 Context 저장

7일차
트랜잭션과 서비스 계층 설계
@Transactional, 서비스 추상화
트랜잭션 전파, 서비스 역할 정의

8일차
고급 실습: 페이징, 정렬, 검색
QueryDSL or JPA 조건 검색
Pageable, Sort, 필터 검색 API 작성

9일차
코드 리팩토링 + AOP
반복 로직 제거, AOP 활용
로깅, 인증 체크 AOP 구현

10일차
실전 미니 프로젝트
팀별 API 설계 및 구현
Swagger 문서화, 배포용 build
