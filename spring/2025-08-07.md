#
## Day 8 : í˜ì´ì§• & ê²€ìƒ‰ ì¡°ê±´ API ì‹¤ìŠµ(Talend ê¸°ë°˜)
* ê°•ì˜ ëª©í‘œ   
 pageable, Sort, @RequestParamì„ ì´ìš©í•œ í˜ì´ì§• ì²˜ë¦¬ êµ¬í˜„   
 ì œëª© í‚¤ì›Œë“œ ê²€ìƒ‰ ê¸°ëŠ¥ API ê°œë°œ   
 Talend API Testerë¥¼ í†µí•œ í˜ì´ì§€/ê²€ìƒ‰ ì¡°ê±° í…ŒìŠ¤íŠ¸ ìˆ˜í–‰   
   
* ê°•ì˜ ë‚´ìš©
1. Spring Data JPA ì—ì„œ Pageable, Page<T> êµ¬ì¡° ì´í•´
2. @RequestParamì„ í†µí•œ page, size, keyword íŒŒë¼ë¯¸í„° ì²˜ë¦¬
3. ê²€ìƒ‰ ì¡°ê±´ì´ í¬í•¨ëœ ê²Œì‹œê¸€ ëª©ë¡ API ê°œë°œ
4. Talendë¥¼ í™œìš©í•œ í˜ì´ì§€ ì´ë™, í‚¤ì›Œë“œ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸

* ì‹¤ìŠµ ì½”ë“œ : ê²Œì‹œê¸€ ëª©ë¡ í˜ì´ì§• + ê²€ìƒ‰ API
* Post.java
package com.example.board.dmain;
import jakarata.persistence.*;
@Entity
@Getter
@Setter
public class Post {
  @Id
  @GeneratedValue(stragety=GenerationType.IDENTITY)
  private Long id;

  private String title;
  
  private String content;

}

* PostRepository.java

  package com.example.board.repository;
  import com.example.board.domain.Post;
  import org.springframework.data.domain.Page;
  import org.springframework.data.domain.Pageable;
  import org.springframework.data.jpa.repository.JpaRepository;

  public interface PostRepository estends JpaRepository<Post, Long>{
    Page<Post> findByTitleContaining(String keyword, Pageable pageable);

  }

* PostController.java(ëª©ë¡ ì¡°íšŒ API ì¶”ê°€)
@GetMapping
public ResponseEntity<Page<Post>> getPosts(
  @RequestParam(defaultValue="")String keyword
  @RequestParam(defaultValue="0") int paage,
  @RequestParam(defaultValue="5") int size
){
  Pageable pageable = PageRequest.of(page.size, Sort.by("id").decending());
  Page<Post> posts = PostRepository.findByTitleContaining(keyword, pageable);
  return ResponseEntity.ok(posts);
}

## Day8 ê³¼ì œ
1. ê²Œì‹œê¸€ 10ê±´ ì´ìƒ ìƒì„± í›„ / posts APIì—ì„œ page, size ê°’ì„ ë³€ê²½í•´ Talendë¡œ ì¡°íšŒí•´ ë³´ì„¸ìš”.

2. keyword íŒŒë¼ë¯¸í„°ì— ì¼ë¶€ ì œëª© í‚¤ì›Œë“œë¥¼ ë„£ê³  ê²°ê³¼ê°€ í•„í„°ë§ ë˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

3. ì‘ë‹µì˜ totalpages, totalElements, contentêµ¬ì¡°ë¥¼ ìº¡ì²˜í•˜ê³  ë¶„ì„í•´ë³´ì„¸ìš”.

4. ì •ë ¬ ê¸°ì¤€ì„ title ê¸°ì¤€ìœ¼ë¡œ ë°”ê¾¸ê³  ì •ë ¬ ìˆœì„œë¥¼ ì¡°ì‘í•˜ë ¤ë©´ ì–´ë–»ê²Œ ê°œì„ í•  ìˆ˜ ìˆì„ì§€ ì‹¤ìŠµí•˜ì„¸ìš”.



ğŸ“‚ íŒ¨í‚¤ì§€ êµ¬ì¡°
com.example.board
â”œâ”€â”€ BoardApplication.java
â”œâ”€â”€ domain
â”‚   â””â”€â”€ Post.java
â”œâ”€â”€ repository
â”‚   â””â”€â”€ PostRepository.java
â”œâ”€â”€ controller
â”‚   â””â”€â”€ PostController.java



* Post ì—”í‹°í‹°

        // domain/Post.java
        package com.example.board.domain;

        import jakarta.persistence.*;

        @Entity
        public class Post {
            @Id
            @GeneratedValue(strategy = GenerationType.IDENTITY)
            private Long id;

            private String title;
            private String content;

            // Getters & Setters
        }

* PostRepository

        // repository/PostRepository.java
        package com.example.board.repository;
        import com.example.board.domain.Post;
        import org.springframework.data.domain.*;
        import org.springframework.data.jpa.repository.JpaRepository;
        public interface PostRepository extends JpaRepository<Post, Long> {
            Page<Post> findByTitleContaining(String keyword, Pageable pageable);
        }

* PostController â€“ í˜ì´ì§• & ê²€ìƒ‰ API

        // controller/PostController.java
        package com.example.board.controller;

        import com.example.board.domain.Post;
        import com.example.board.repository.PostRepository;
        import org.springframework.data.domain.*;
        import org.springframework.http.ResponseEntity;
        import org.springframework.web.bind.annotation.*;

        @RestController
        @RequestMapping("/posts")
        public class PostController {

            private final PostRepository postRepository;

            public PostController(PostRepository postRepository) {
                this.postRepository = postRepository;
            }
            @GetMapping
            public ResponseEntity<Page<Post>> getPosts(
                    @RequestParam(defaultValue = "") String keyword,
                    @RequestParam(defaultValue = "0") int page,
                    @RequestParam(defaultValue = "5") int size,
                    @RequestParam(defaultValue = "id") String sort,
                    @RequestParam(defaultValue = "desc") String direction) {

                Sort sortObj = direction.equalsIgnoreCase("asc") ?
                        Sort.by(sort).ascending() : Sort.by(sort).descending();

                Pageable pageable = PageRequest.of(page, size, sortObj);

                Page<Post> result = postRepository.findByTitleContaining(keyword, pageable);
                return ResponseEntity.ok(result);
            }
        }


  * Talend ìš”ì²­ ì˜ˆì‹œ

        * ê¸°ë³¸ í˜ì´ì§• í…ŒìŠ¤íŠ¸

      GET /posts?page=0&size=5

      ì‘ë‹µ JSON êµ¬ì¡°:

      {
        "content": [...],
        "totalElements": 15,
        "totalPages": 3,
        "number": 0
      }


        * ê²€ìƒ‰ ì¡°ê±´ í…ŒìŠ¤íŠ¸
      GET /posts?keyword=ê³µì§€
      --> ì œëª©ì— "ê³µì§€" í¬í•¨ëœ ê²Œì‹œê¸€ë§Œ í•„í„°ë§ë¨


        * ì •ë ¬ ê¸°ì¤€ ë°”ê¾¸ê¸°
      GET /posts?sort=title&direction=asc
      --> ì œëª© ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬ í™•ì¸


        * ì •ë ¬ ê¸°ì¤€ ê°œì„  ì˜ˆì‹œ
      @RequestParam(defaultValue = "id") String sort,
      @RequestParam(defaultValue = "desc") String direction

      ì´ ë°©ì‹ìœ¼ë¡œ title, content, id ë“± ìœ ì—°í•˜ê²Œ ì •ë ¬ ê°€ëŠ¥
      PageRequest.of(page, size, Sort.by(...))ë¡œ ì ìš©

** ì°¸ê³ ì‚¬í•­
@RequestParamì˜ defaultValueëŠ” í•­ìƒ String íƒ€ì…ì…ë‹ˆë‹¤.
íŒŒë¼ë¯¸í„° íƒ€ì…ì´ int, boolean, doubleì´ë¼ë„ Stringìœ¼ë¡œ ì „ë‹¬ëœ ê°’ì„ ë‚´ë¶€ì ìœ¼ë¡œ ìë™ ë³€í™˜(conversion) í•©ë‹ˆë‹¤.



## Day 8 ì‹¤ìŠµí˜• ê³¼ì œ 10ë¬¸ì œ

ë¬¸ì œ 1
Post ì—”í‹°í‹°ë¥¼ ì •ì˜í•˜ì„¸ìš”.
id, title, content í•„ë“œë¥¼ í¬í•¨í•˜ê³ 

@Entity, @Id, @GeneratedValueë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.



ë¬¸ì œ 2
PostRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±í•˜ê³ ,
 ì œëª©ì— íŠ¹ì • í‚¤ì›Œë“œê°€ í¬í•¨ëœ ê²Œì‹œê¸€ì„ í˜ì´ì§• ì²˜ë¦¬ë¡œ ì¡°íšŒí•˜ëŠ” ë©”ì„œë“œë¥¼ ì •ì˜í•˜ì„¸ìš”.
 íŒíŠ¸: findByTitleContaining(String keyword, Pageable pageable)



ë¬¸ì œ 3
PostControllerì—ì„œ GET ìš”ì²­ìœ¼ë¡œ ê²Œì‹œê¸€ ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” APIë¥¼ ì‘ì„±í•˜ì„¸ìš”.
ê²½ë¡œ: /posts

QueryParam: page, size, keyword ì‚¬ìš©



ë¬¸ì œ 4
Springì˜ PageRequest.of(page, size, Sort.by(...))ë¥¼ ì‚¬ìš©í•´
 id ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•˜ë„ë¡ ì„¤ì •í•˜ì„¸ìš”.



ë¬¸ì œ 5
Talend API Testerë¥¼ ì‚¬ìš©í•´ì„œ ë‹¤ìŒ ìš”ì²­ì„ ë³´ë‚´ê³  ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”:
GET /posts?page=0&size=5



ë¬¸ì œ 6
10ê±´ ì´ìƒì˜ ê²Œì‹œê¸€ì„ ë“±ë¡í•œ ë’¤,
 /posts?page=1&size=3ì™€ ê°™ì´ í˜ì´ì§€ë¥¼ ì´ë™í•˜ë©° ê²°ê³¼ê°€ ë°”ë€ŒëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.



ë¬¸ì œ 7
ë‹¤ìŒ ìš”ì²­ì„ ë³´ë‚´ê³ , ì œëª©ì— í¬í•¨ëœ í‚¤ì›Œë“œë¡œ í•„í„°ë§ì´ ì˜ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
GET /posts?keyword=ê³µì§€



ë¬¸ì œ 8
API ì‘ë‹µì—ì„œ ë‹¤ìŒ í•­ëª©ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ Talendì—ì„œ ìº¡ì²˜í•˜ê³  ë¶„ì„í•˜ì„¸ìš”:
totalPages

totalElements

content



ë¬¸ì œ 9
ì •ë ¬ ê¸°ì¤€ì„ "title"ë¡œ ë°”ê¾¸ê³ , ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬ì´ ë˜ë„ë¡ APIë¥¼ ìˆ˜ì •í•´ë³´ì„¸ìš”.
 (íŒíŠ¸: Sort.by("title").ascending())



ë¬¸ì œ 10
í˜ì´ì§•ê³¼ ê²€ìƒ‰ ê¸°ëŠ¥ì´ ì™œ í•„ìš”í•œì§€, ì–´ë–¤ ìƒí™©ì—ì„œ ê°€ì¥ ìœ ìš©í•œì§€ì— ëŒ€í•´ ê°„ë‹¨íˆ ì„¤ëª…í•˜ì„¸ìš”.
 â†’ í´ë¼ì´ì–¸íŠ¸ UX, ì„œë²„ íš¨ìœ¨ì„± ê´€ì  í¬í•¨


## Day 8 ì‹¤ìŠµí˜• ë¬¸ì œ í’€ì´

ë¬¸ì œ 1
Post.java
package com.example.board.domain;

import jakarta.persistence.*;

@Entity
public class Post {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String title;
    private String content;

    // Getters, Setters
}
ë¬¸ì œ 2
PostRepository.java
package com.example.board.repository;

import com.example.board.domain.Post;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.jpa.repository.JpaRepository;

public interface PostRepository extends JpaRepository<Post, Long> {
    Page<Post> findByTitleContaining(String keyword, Pageable pageable);
}
ë¬¸ì œ 3
PostController.java
package com.example.board.controller;

import com.example.board.domain.Post;
import com.example.board.repository.PostRepository;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.domain.PageRequest;
import org.springframework.data.domain.Sort;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/posts")
public class PostController {

    private final PostRepository postRepository;

    public PostController(PostRepository postRepository) {
        this.postRepository = postRepository;
    }
@GetMapping
    public ResponseEntity<Page<Post>> getPosts(
            @RequestParam(defaultValue = "") String keyword,
            @RequestParam(defaultValue = "0") int page,
            @RequestParam(defaultValue = "5") int size) {

        Pageable pageable = PageRequest.of(page, size, Sort.by("id").descending());
        Page<Post> posts = postRepository.findByTitleContaining(keyword, pageable);
        return ResponseEntity.ok(posts);
    }
}
ë¬¸ì œ 4
PageRequest.of(...) ì„¤ì •
Pageable pageable = PageRequest.of(page, size, Sort.by("id").descending());


ë¬¸ì œ 5
Talend í…ŒìŠ¤íŠ¸ - ê¸°ë³¸ í˜ì´ì§•
URL: GET http://localhost:8080/posts?page=0&size=5


í™•ì¸: ì²« ë²ˆì§¸ í˜ì´ì§€ ê²Œì‹œê¸€ 5ê±´ë§Œ ì‘ë‹µë¨



ë¬¸ì œ 6
Talend í…ŒìŠ¤íŠ¸ - í˜ì´ì§€ ì´ë™
ìš”ì²­ 1: page=0&size=3


ìš”ì²­ 2: page=1&size=3


ê²°ê³¼: ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ê°€ í˜ì´ì§€ì— ë”°ë¼ ë°”ë€ŒëŠ”ì§€ í™•ì¸



ë¬¸ì œ 7
Talend í…ŒìŠ¤íŠ¸ - í‚¤ì›Œë“œ ê²€ìƒ‰
ìš”ì²­: GET /posts?keyword=ê³µì§€


ê²°ê³¼: ì œëª©ì— "ê³µì§€"ê°€ í¬í•¨ëœ ê²Œì‹œê¸€ë§Œ ì¡°íšŒ



ë¬¸ì œ 8
Talend ì‘ë‹µ í™•ì¸
ì‘ë‹µ JSON êµ¬ì¡° ì˜ˆì‹œ:
{
  "content": [...],
  "totalElements": 12,
  "totalPages": 3,
  "number": 0,
  ...
}

â†’ totalPages, totalElements, content ì¡´ì¬ ì—¬ë¶€ í™•ì¸

ë¬¸ì œ 9
ì •ë ¬ ê¸°ì¤€ ë³€ê²½: title ì˜¤ë¦„ì°¨ìˆœ
Pageable pageable = PageRequest.of(page, size, Sort.by("title").ascending());

â†’ ìš”ì²­ ê²°ê³¼ì—ì„œ ì œëª©ìˆœìœ¼ë¡œ ì •ë ¬ëœ ë°ì´í„° í™•ì¸

ë¬¸ì œ 10
í˜ì´ì§• & ê²€ìƒ‰ì˜ ì¥ì 
ì„œë²„: ëŒ€ìš©ëŸ‰ ë°ì´í„° ì¡°íšŒ ì‹œ ì„±ëŠ¥ ë¶€ë‹´ ì¤„ì„ (ì˜ˆ: 1ë§Œê±´ ì¤‘ 10ê±´ë§Œ ì‘ë‹µ)


í´ë¼ì´ì–¸íŠ¸: í•„ìš”í•œ ì •ë³´ë§Œ ë°›ì•„ì„œ ì‚¬ìš©ì UX í–¥ìƒ


ê²€ìƒ‰: ì‚¬ìš©ì ë§ì¶¤í˜• ì •ë³´ íƒìƒ‰ì— ìœ ë¦¬ (ì˜ˆ: í‚¤ì›Œë“œ í•„í„°, ì¡°ê±´ ê²€ìƒ‰)

